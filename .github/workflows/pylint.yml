name: Pylint

on: [push]

jobs:
   build:
     runs-on: ubuntu-latest
     strategy:
       matrix:
         python-version: ["3.x"]
     steps:
     - uses: actions/checkout@v2
     - name: Set up Python ${{ matrix.python-version }}
       uses: actions/setup-python@v2
       with:
         python-version: ${{ matrix.python-version }}
     - name: Install dependencies
       run: |
         python -m pip install --upgrade pip
         pip install pylint
         pip install pylint-fail-under
         pip install -r requirements.txt
     - name: Analysing the code with pylint
       run: find . -name '*.py' -print -exec pylint --disable=E0401,W0611 {} \;
     - name: Fails if pylint score is less than 6.0
       run: |
         for file in $(find -name '*.py')
         do
           pylint --disable=E0401,W0611"$file" --fail-under=6.0;    
         done
